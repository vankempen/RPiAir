<!DOCTYPE html>
<html>
	<head>
		<title>RPiAir</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap -->
		<link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet" media="screen">

    <!-- Custom styles -->
		<style type="text/css">
			body { padding: 60px 0px 40px; }
      .nav-container { text-align: center; }
      .thumbnail { margin-bottom: 12px; text-align: center; }
      .thumbnail img { padding: 7px 7px 0px; }
      .caption { line-height: 1.2em; max-height: 3.0em; text-align: center; word-wrap: break-word; overflow: hidden; }
		</style>


    <!-- jQuery -->
		<script src="{{ url_for('static', filename='js/jquery-current.min.js') }}"></script>

		<script type=text/javascript>
      function ajaxCall(url, className){
        $(className).click(function(){
            var d = $(this).attr('urlData')
            $.get(url, {data: d}, function(data, status){
              {% if debug is sameas True %}
              alert(data.message);
              {% endif %}
              });
            });
      }

		$(document).ready(function(){
        ajaxCall('/run', '.cmd-btn', ['cmd'])    //command buttons
        ajaxCall('/play', '.play-btn', ['f'])    //video buttons
        ajaxCall('/rescan', '.lib-btn', [])     //library buttons
		});

		</script>
	</head>
	<body>

  <!-- player buttons -->
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="nav-container">
        <!-- subtitles not implemented yet
				<div class="btn-group">
          <button class="cmd-btn btn btn-default navbar-btn" urlData="{'cmd':toggleSubtitle"><span class="glyphicon glyphicon-align-justify"></span></button>
        </div>
        -->
				<div class="btn-group">
          <button class="cmd-btn btn btn-default navbar-btn" urlData="{'cmd':'seek-600'}"><span class="glyphicon glyphicon-fast-backward"></span></button>
          <button class="cmd-btn btn btn-default navbar-btn" urlData="{'cmd':'seek-30'}"><span class="glyphicon glyphicon-step-backward"></span></button>
          <button class="cmd-btn btn btn-default navbar-btn" urlData="{'cmd':'togglePlay'}"><span class="glyphicon glyphicon-pause"></span></button>
          <button class="cmd-btn btn btn-default navbar-btn" urlData="{'cmd':'exit'}"><span class="glyphicon glyphicon-stop"></span></button>
          <button class="cmd-btn btn btn-default navbar-btn" urlData="{'cmd':'seek+30'}"><span class="glyphicon glyphicon-step-forward"></span></button>
          <button class="cmd-btn btn btn-default navbar-btn" urlData="{'cmd':'seek+600'}"><span class="glyphicon glyphicon-fast-forward"></span></button>
				</div>
				<div class="btn-group">
          <button class="cmd-btn btn btn-default navbar-btn" urlData="{'cmd':'decrVolume'}"><span class="glyphicon glyphicon-volume-down"></span></button>
          <button class="cmd-btn btn btn-default navbar-btn" urlData="{'cmd':'incrVolume'}"><span class="glyphicon glyphicon-volume-up"></span></button>
				</div>
		</div>
	</div>

  <!-- video files -->
  <div class="container">
	<div class=row">
    <div class="col-md-10 col-md-offset-1">
      <!-- loop over all files and insert new rows every n thumbnails -->
      <div class="row">
        {% for movie in movies %}
        <div class="col-md-3 movie">
          <div class="thumbnail">
            <img class="play-btn" urlData="{'f':'{{ movie.location }}'}" src="{{ url_for('static', filename='thumbs/' + (movie.thumb|default('noThumbAvailable.png', True))) }}" /><div class="caption">{{ movie.title }}</div>
          </div>
        </div>
          {% if loop.index is divisibleby 4 %}
      </div>
      <div class="row">
          {% endif %}
        {% else %}
        <div class="col-md-6 col-md-offset-3">
        Unfortunately there are currently no files in the library! Try <a href="/rescan">rescanning</a> or set another path in your config file.
      </div>
      {% endfor %}
      </div>
    </div>
  </div>
  </div>

  <!-- library buttons -->
	<div class="navbar navbar-default navbar-fixed-bottom" style="min-height: 25px; border-top: 1px solid #ccc;">
    <button class="lib-btn btn btn-default navbar-btn btn-xs navbar-right" style="margin: 2px 0px;"><span class="glyphicon glyphicon-refresh"></span></button>
	</div>
	</body>
</html>
